<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <title>Text to Emoji Translator</title>
    <style>
        body {
            font-family: roboto;
            margin: 2em;
            color: #3d3d3d;
            --mdc-theme-primary: #007f8b;
            --mdc-theme-on-primary: #f1f3f4;
        }

        h1 {
            color: #007f8b;
        }

        h2 {
            clear: both;
            font-size: 1.5em;
        }

        button {
            min-width: 200px;
            height: 50px;
        }

        section {
            opacity: 1;
            transition: opacity 500ms ease-in-out;
        }

        .mdc-text-field {
            margin-right: 16px;
            margin-top: 16px;
        }

        .mdc-text-field__input {
            height: 100px;
            --mdc-theme-primary: #12b5cb;
            --mdc-theme-on-primary: #f1f3f4;
        }

        #result {
            min-height: 100px;
            min-width: 500px;
            font-weight: bold;
        }

        .invisible {
            opacity: 0.2;
        }

        #calculate {
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <h1>Translate Text to Emoji using MediaPipe</h1>
    <section id="demos" class="invisible">
        <h2>Enter text to translate into emojis:</h2>
        <div style="display: block;">
            <label id="textField1"
                class="mdc-text-field mdc-text-field--filled mdc-text-field--textarea mdc-text-field--no-label">
                <span class="mdc-text-field__ripple"></span>
                <span class="mdc-text-field__resizer">
                    <textarea id="textInput1" class="mdc-text-field__input" rows="8" cols="40" aria-label="Text Input"
                        placeholder="Enter text here"></textarea>
                </span>
                <span class="mdc-line-ripple"></span>
            </label></br>
        </div>
        <button id="calculate" class="mdc-button mdc-button--raised">
            <span class="mdc-button__label">TRANSLATE</span>
        </button></br>
        <p><b>Emoji Translation:</b></p>
        <p id="result"></p>
    </section>
    <script type="module">
        import { MDCTextField } from "https://cdn.skypack.dev/@material/textfield";
        import { MDCRipple } from "https://cdn.skypack.dev/@material/ripple";
        import text from "https://cdn.skypack.dev/@mediapipe/tasks-text@0.10.0";
        const { TextEmbedder, FilesetResolver, TextEmbedderResult } = text;

        const demosSection = document.getElementById("demos");
        let textEmbedder;

        async function createEmbedder() {
            const textFiles = await FilesetResolver.forTextTasks(
                "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-text@0.10.0/wasm"
            );
            textEmbedder = await TextEmbedder.createFromOptions(textFiles, {
                baseOptions: {
                    modelAssetPath: `https://storage.googleapis.com/mediapipe-models/text_embedder/universal_sentence_encoder/float32/1/universal_sentence_encoder.tflite`
                }
            });
            demosSection.classList.remove("invisible");
        }
        createEmbedder();

        const textInput1 = new MDCTextField(
            document.getElementById("textField1")
        );
        const calculateBt = document.getElementById("calculate");
        const resultLB = document.getElementById("result");

        calculateBt.addEventListener("click", translateToEmoji);

        async function translateToEmoji() {
            const text1 = textInput1.value;

            if (text1 === "") {
                alert("Please enter text to translate");
                return;
            }
            resultLB.innerText = "Translating...";

            // Wait to run the function until inner text is set
            await sleep(5);

            const embeddingResult1 = await textEmbedder.embed(text1);

            let maxSimilarity = -1;
            let bestMatch = "";

            for (const [phrase, emoji] of Object.entries(textToEmojiMapping)) {
                const embeddingResult2 = await textEmbedder.embed(phrase);
                const similarity = TextEmbedder.cosineSimilarity(
                    embeddingResult1.embeddings[0],
                    embeddingResult2.embeddings[0]
                );
                if (similarity > maxSimilarity) {
                    maxSimilarity = similarity;
                    bestMatch = emoji;
                }
            }
            resultLB.innerText = bestMatch || "No matching emoji found";
        }

        function sleep(ms) {
            return new Promise((resolve) => setTimeout(resolve, ms));
        }

        const textToEmojiMapping = {
            "happy": "😊",
            "sad": "😢",
            "love": "❤️",
            // "angry": "😡",
            "laugh": "😂",
            "surprised": "😮",
            "cool": "😎",
            "crying": "😭",
            "thinking": "🤔",
            "tired": "😴",
            "scared": "😱",
            "sick": "🤒",
            "confused": "😕",
            "kiss": "😘",
            "wink": "😉",
            "blushing": "😊",
            "bored": "😐",
            "grinning": "😁",
            "relieved": "😌",
            "sleepy": "😪",
            "worried": "😟",
            "astonished": "😲",
            "yawning": "🥱",
            "hug": "🤗",
            "shocked": "😵",
            "sweating": "😓",
            "party": "🥳",
            "nerd": "🤓",
            "angry face": "😠",
            "vomit": "🤮",
            "silly": "😜",
            "hugging face": "🤗",
            "mind blown": "🤯",
            "clapping": "👏",
            "thumbs up": "👍",
            "thumbs down": "👎",
            "praying": "🙏",
            "muscle": "💪",
            "fire": "🔥",
            "heart": "❤️",
            "broken heart": "💔",
            "star": "⭐",
            "poop": "💩",
            "checkmark": "✔️",
            "cross": "❌",
            "question": "❓",
            "exclamation": "❗",
            "money": "💰",
            "gift": "🎁",
            "light bulb": "💡",
            "phone": "📱",
            "computer": "💻",
            "alarm clock": "⏰",
            "calendar": "📅",
            "email": "📧",
            "globe": "🌍",
            "rocket": "🚀",
            "car": "🚗",
            "bicycle": "🚲",
            "airplane": "✈️",
            "train": "🚆",
            "bus": "🚌",
            "boat": "⛵",
            "balloon": "🎈",
            "camera": "📷",
            "musical note": "🎵",
            "microphone": "🎤",
            "headphones": "🎧",
            "paint palette": "🎨",
            "soccer": "⚽",
            "basketball": "🏀",
            "baseball": "⚾",
            "tennis": "🎾",
            "football": "🏈",
            "trophy": "🏆",
            "medal": "🏅",
            "dice": "🎲",
            "card": "🃏",
            "spade": "♠️",
            "heart card": "♥️",
            "diamond": "♦️",
            "club": "♣️",
            "chess": "♟️",
            "flower": "🌸",
            "tree": "🌳",
            "mountain": "⛰️",
            "sun": "☀️",
            "moon": "🌕",
            "star": "🌟",
            "rainbow": "🌈",
            "cloud": "☁️",
            "rain": "🌧️",
            "snow": "❄️",
            "lightning": "⚡",
            "fire": "🔥",
            "water": "💧",
            "wave": "🌊",
            "fish": "🐟",
            "whale": "🐋",
            "dolphin": "🐬",
            "shark": "🦈",
            "elephant": "🐘",
            "lion": "🦁",
            "tiger": "🐅",
            "horse": "🐎",
            "dog": "🐕",
            "cat": "🐈",
            "rabbit": "🐇",
            "frog": "🐸",
            "bear": "🐻",
            "panda": "🐼",
            "koala": "🐨",
            "kangaroo": "🦘",
            "monkey": "🐒",
            "penguin": "🐧",
            "chicken": "🐔",
            "duck": "🦆",
            "eagle": "🦅",
            "owl": "🦉",
            "bat": "🦇",
            "butterfly": "🦋",
            "bee": "🐝",
            "ladybug": "🐞",
            "spider": "🕷️",
            "scorpion": "🦂",
            "snail": "🐌",
            "ant": "🐜",
            "crab": "🦀",
            "lobster": "🦞",
            "shrimp": "🦐",
            "octopus": "🐙",
            "squid": "🦑",
            "mushroom": "🍄",
            "apple": "🍎",
            "banana": "🍌",
            "grapes": "🍇",
            "watermelon": "🍉",
            "lemon": "🍋",
            "strawberry": "🍓",
            "peach": "🍑",
            "pineapple": "🍍",
            "cherry": "🍒",
            "avocado": "🥑",
            "tomato": "🍅",
            "carrot": "🥕",
            "corn": "🌽",
            "pepper": "🌶️",
            "broccoli": "🥦",
            "potato": "🥔",
            "cheese": "🧀",
            "bread": "🍞",
            "croissant": "🥐",
            "baguette": "🥖",
            "pretzel": "🥨",
            "pancakes": "🥞",
            "waffles": "🧇",
            "bacon": "🥓",
            "egg": "🥚",
            "fried egg": "🍳",
            "chicken leg": "🍗",
            "meat": "🥩",
            "hot dog": "🌭",
            "hamburger": "🍔",
            "pizza": "🍕",
            "sandwich": "🥪",
            "taco": "🌮",
            "burrito": "🌯",
            "fries": "🍟",
            "popcorn": "🍿",
            "salad": "🥗",
            "spaghetti": "🍝",
            "sushi": "🍣",
            "ice cream": "🍦",
            "cake": "🍰",
            "chocolate": "🍫",
            "cookie": "🍪",
            "donut": "🍩",
            "coffee": "☕",
            "tea": "🍵",
            "beer": "🍺",
            "wine": "🍷",
            "cocktail": "🍸",
            "milk": "🥛",
            "water": "💧",
            "juice": "🍹",
            "soda": "🥤",
            "champagne": "🍾",
            "baby bottle": "🍼",
            "fork and knife": "🍴",
            "spoon": "🥄",
            "plate": "🍽️",
            "cooking": "🍳",
            "glasses": "👓",
            "sunglasses": "🕶️",
            "scarf": "🧣",
            "gloves": "🧤",
            "jacket": "🧥",
            "shirt": "👕",
            "jeans": "👖",
            "dress": "👗",
            "skirt": "👚",
            "bikini": "👙",
            "shorts": "🩳",
            "shoes": "👟",
            "high heels": "👠",
            "boots": "👢",
            "hat": "👒",
            "cap": "🧢",
            "watch": "⌚",
            "ring": "💍",
            "necklace": "📿",
            "earrings": "💎",
            "bracelet": "🧿",
            "bag": "👜",
            "backpack": "🎒",
            "luggage": "🧳",
            "umbrella": "☂️",
            "lipstick": "💄",
            "makeup": "💋",
            "nail polish": "💅",
            "crown": "👑",
            "money bag": "💰",
            "credit card": "💳",
            "bank": "🏦",
            "shopping cart": "🛒",
            "gift": "🎁",
            "teddy bear": "🧸",
            "ball": "⚽",
            "trophy": "🏆",
            "medal": "🏅",
            "dice": "🎲",
            "card": "🃏",
            "chess": "♟️",
            "joker": "🃏",
            "spade": "♠️",
            "heart card": "♥️",
            "diamond": "♦️",
            "club": "♣️",
            "flower": "🌸",
            "tree": "🌳",
            "mountain": "⛰️",
            "sun": "☀️",
            "moon": "🌕",
            "rainbow": "🌈",
            "cloud": "☁️",
            "rain": "🌧️",
            "snow": "❄️",
            "lightning": "⚡",
            "fire": "🔥",
            "water": "💧",
            "wave": "🌊",
            "earth": "🌍",
            "globe": "🌐",
            "airplane": "✈️",
            "train": "🚆",
            "bus": "🚌",
            "car": "🚗",
            "bicycle": "🚲",
            "motorcycle": "🏍️",
            "boat": "⛵",
            "rocket": "🚀",
            "satellite": "🛰️",
            "ufo": "🛸",
            "house": "🏠",
            "building": "🏢",
            "church": "⛪",
            "castle": "🏰",
            "hospital": "🏥",
            "school": "🏫",
            "stadium": "🏟️",
            "fountain": "⛲",
            "tent": "⛺",
            "factory": "🏭",
            "office": "🏢",
            "bank": "🏦",
            "hotel": "🏨",
            "shop": "🏪",
            "market": "🏬",
            "restaurant": "🍽️",
            "cafe": "☕",
            "bar": "🍻",
            "theater": "🎭",
            "cinema": "🎥",
            "museum": "🏛️",
            "library": "📚",
            "bookstore": "📖",
            "pharmacy": "💊",
            "gas station": "⛽",
            "park": "🏞️",
            "garden": "🌳",
            "playground": "🏖️",
            "zoo": "🦁",
            "amusement park": "🎡",
            "aquarium": "🐠",
            "beach": "🏝️",
            "mountain": "⛰️",
            "lake": "🏞️",
            "river": "🌊",
            "forest": "🌲",
            "desert": "🏜️",
            "city": "🏙️",
            "street": "🚶",
            "road": "🛣️",
            "bridge": "🌉",
            "tower": "🗼",
            "monument": "🗿",
            "statue": "🗽",
            "lighthouse": "🏯",
            "windmill": "🌬️",
            "barn": "🏡",
            "farm": "🌾",
            "field": "🌱",
            "forest": "🌲",
            "jungle": "🌳",
            "ocean": "🌊",
            "sea": "🌊",
            "river": "🏞️",
            "lake": "🏞️",
            "pond": "🏞️",
            "waterfall": "🌊",
            "island": "🏝️",
            "volcano": "🌋",
            "cave": "🌌",
            "desert": "🏜️",
            "beach": "🏖️",
            "cliff": "🗻",
            "hill": "🌄",
            "valley": "🏞️",
            "field": "🌾",
            "meadow": "🌱",
            "pasture": "🌾",
            "swamp": "🌲",
            "bay": "🌊",
            "cove": "🏝️",
            "fjord": "🌊",
            "lagoon": "🏖️",
            "marsh": "🌾",
            "reef": "🐠",
            "shore": "🌊",
            "tide": "🌊",
            "wave": "🌊",
            "whirlpool": "🌊",
            "vortex": "🌪️",
            "waterfall": "🌊",
            "geyser": "🌋",
            "hot spring": "🌊",
            "oasis": "🏝️",
            "quicksand": "🏜️",
            "spring": "🌷",
            "pond": "🏞️",
            "lake": "🏞️",
            "lagoon": "🏝️",
            "swamp": "🌾",
            "marsh": "🌾",
            "field": "🌾",
            "meadow": "🌱",
            "pasture": "🌾",
            "valley": "🏞️",
            "hill": "🌄",
            "mountain": "⛰️",
            "volcano": "🌋",
            "cave": "🌌",
            "cliff": "🗻",
            "canyon": "🏞️",
            "gorge": "🌊",
            "ravine": "🌊",
            "chasm": "🌊",
            "abyss": "🌊",
            "desert": "🏜️",
            "dune": "🏜️",
            "mesa": "🏞️",
            "plateau": "🏞️",
            "hill": "🌄",
            "peak": "🗻",
            "summit": "🗻",
            "ridge": "🌊",
            "range": "🌊",
            "foothills": "🌊",
            "waterfall": "🌊",
            "geyser": "🌋",
            "hot spring": "🌊",
            "oasis": "🏝️",
            "quicksand": "🏜️",
            "spring": "🌷",
            "well": "🏞️",
            "reservoir": "🏞️",
            "lake": "🏞️",
            "lagoon": "🏝️",
            "swamp": "🌾",
            "marsh": "🌾",
            "field": "🌾",
            "meadow": "🌱",
            "pasture": "🌾",
            "valley": "🏞️",
            "hill": "🌄",
            "mountain": "⛰️",
            "volcano": "🌋",
            "cave": "🌌",
            "cliff": "🗻",
            "canyon": "🏞️",
            "gorge": "🌊",
            "ravine": "🌊",
            "chasm": "🌊",
            "abyss": "🌊",
            "desert": "🏜️",
            "dune": "🏜️",
            "mesa": "🏞️",
            "plateau": "🏞️",
            "hill": "🌄",
            "peak": "🗻",
            "summit": "🗻",
            "ridge": "🌊",
            "range": "🌊",
            "foothills": "🌊",
            "waterfall": "🌊",
            "geyser": "🌋",
            "hot spring": "🌊",
            "oasis": "🏝️",
            "quicksand": "🏜️",
            "spring": "🌷",
            "well": "🏞️",
            "reservoir": "🏞️",
            "lake": "🏞️",
            "lagoon": "🏝️",
            "swamp": "🌾",
            "marsh": "🌾",
            "field": "🌾",
            "meadow": "🌱",
            "pasture": "🌾",
            "valley": "🏞️",
            "hill": "🌄",
            "mountain": "⛰️",
            "volcano": "🌋",
            "cave": "🌌",
            "cliff": "🗻",
            "canyon": "🏞️",
            "gorge": "🌊",
            "ravine": "🌊",
            "chasm": "🌊",
            "abyss": "🌊",
            "desert": "🏜️",
            "dune": "🏜️",
            "mesa": "🏞️",
            "plateau": "🏞️",
            "hill": "🌄",
            "peak": "🗻",
            "summit": "🗻",
            "ridge": "🌊",
            "range": "🌊",
            "foothills": "🌊",
            "waterfall": "🌊",
            "geyser": "🌋",
            "hot spring": "🌊",
            "oasis": "🏝️",
            "quicksand": "🏜️",
            "spring": "🌷",
            "well": "🏞️",
            "reservoir": "🏞️",
            "lake": "🏞️",
            "lagoon": "🏝️",
            "swamp": "🌾",
            "marsh": "🌾",
            "field": "🌾",
            "meadow": "🌱",
            "pasture": "🌾",
            "valley": "🏞️",
            "hill": "🌄",
            "mountain": "⛰️",
            "volcano": "🌋",
            "cave": "🌌",
            "cliff": "🗻",
            "canyon": "🏞️",
            "gorge": "🌊",
            "ravine": "🌊",
            "chasm": "🌊",
            "abyss": "🌊",
            "desert": "🏜️",
            "dune": "🏜️",
            "mesa": "🏞️",
            "plateau": "🏞️",
            "hill": "🌄",
            "peak": "🗻",
            "summit": "🗻",
            "ridge": "🌊",
            "range": "🌊",
            "foothills": "🌊",
            "waterfall": "🌊",
            "geyser": "🌋",
            "hot spring": "🌊",
            "oasis": "🏝️",
            "quicksand": "🏜️",
            "spring": "🌷",
            "well": "🏞️",
            "reservoir": "🏞️",
            "lake": "🏞️",
            "lagoon": "🏝️",
            "swamp": "🌾",
            "marsh": "🌾",
            "field": "🌾",
            "meadow": "🌱",
            "pasture": "🌾",
            "valley": "🏞️",
            "hill": "🌄",
            "mountain": "⛰️",
            "volcano": "🌋",
            "cave": "🌌",
            "cliff": "🗻",
            "canyon": "🏞️",
            "gorge": "🌊",
            "ravine": "🌊",
            "chasm": "🌊",
            "abyss": "🌊",
            "desert": "🏜️",
            "dune": "🏜️",
            "mesa": "🏞️",
            "plateau": "🏞️",
            "hill": "🌄",
            "peak": "🗻",
            "summit": "🗻",
            "ridge": "🌊",
            "range": "🌊",
            "foothills": "🌊",
            "waterfall": "🌊",
            "geyser": "🌋",
            "hot spring": "🌊",
            "oasis": "🏝️",
            "quicksand": "🏜️",
            "spring": "🌷",
            "well": "🏞️",
            "reservoir": "🏞️",
            "lake": "🏞️",
            "lagoon": "🏝️",
            "swamp": "🌾",
            "marsh": "🌾",
            "field": "🌾",
            "meadow": "🌱",
            "pasture": "🌾",
            "valley": "🏞️",
            "hill": "🌄",
            "mountain": "⛰️",
            "volcano": "🌋",
            "cave": "🌌",
            "cliff": "🗻",
            "canyon": "🏞️",
            "gorge": "🌊",
            "ravine": "🌊",
            "chasm": "🌊",
            "abyss": "🌊",
            "desert": "🏜️",
            "dune": "🏜️",
            "mesa": "🏞️",
            "plateau": "🏞️",
            "hill": "🌄",
            "peak": "🗻",
            "summit": "🗻",
            "ridge": "🌊",
            "range": "🌊",
            "foothills": "🌊",
            "waterfall": "🌊",
            "geyser": "🌋",
            "hot spring": "🌊",
            "oasis": "🏝️",
            "quicksand": "🏜️",
            "spring": "🌷",
            "well": "🏞️",
            "reservoir": "🏞️",
            "lake": "🏞️",
            "lagoon": "🏝️",
            "swamp": "🌾",
            "marsh": "🌾",
            "field": "🌾",
            "meadow": "🌱",
            "pasture": "🌾",
            "valley": "🏞️",
            "hill": "🌄",
            "mountain": "⛰️",
            "volcano": "🌋",
            "cave": "🌌",
            "cliff": "🗻",
            "canyon": "🏞️",
            "gorge": "🌊",
            "ravine": "🌊",
            "chasm": "🌊",
            "abyss": "🌊",
            "desert": "🏜️",
            "dune": "🏜️",
            "mesa": "🏞️",
            "plateau": "🏞️",
            "hill": "🌄",
            "peak": "🗻",
            "summit": "🗻",
            "ridge": "🌊",
            "range": "🌊",
            "foothills": "🌊",
            "waterfall": "🌊",
            "geyser": "🌋",
            "hot spring": "🌊",
            "oasis": "🏝️",
            "quicksand": "🏜️",
            "spring": "🌷",
            "well": "🏞️",
            "reservoir": "🏞️",
            "lake": "🏞️",
            "lagoon": "🏝️",
            "swamp": "🌾",
            "marsh": "🌾",
            "field": "🌾",
            "meadow": "🌱",
            "pasture": "🌾",
            "valley": "🏞️",
            "hill": "🌄",
            "mountain": "⛰️",
            "volcano": "🌋",
            "cave": "🌌",
            "cliff": "🗻",
            "canyon": "🏞️",
            "gorge": "🌊",
            "ravine": "🌊",
            "chasm": "🌊",
            "abyss": "🌊",
            "desert": "🏜️",
            "dune": "🏜️",
            "mesa": "🏞️",
            "plateau": "🏞️",
            "hill": "🌄",
            "peak": "🗻",
            "summit": "🗻",
            "ridge": "🌊",
            "range": "🌊",
            "foothills": "🌊",
            "waterfall": "🌊",
            "geyser": "🌋",
            "hot spring": "🌊",
            "oasis": "🏝️",
            "quicksand": "🏜️",
            "spring": "🌷",
            "well": "🏞️",
            "reservoir": "🏞️",
            "lake": "🏞️",
            "lagoon": "🏝️",
            "swamp": "🌾",
            "marsh": "🌾",
            "field": "🌾",
            "meadow": "🌱",
            "pasture": "🌾",
            "valley": "🏞️",
            "hill": "🌄",
            "mountain": "⛰️",
            "volcano": "🌋",
            "cave": "🌌",
            "cliff": "🗻",
            "canyon": "🏞️",
            "gorge": "🌊",
            "ravine": "🌊",
            "chasm": "🌊",
            "abyss": "🌊",
            "desert": "🏜️",
            "dune": "🏜️",
            "mesa": "🏞️",
            "plateau": "🏞️",
            "hill": "🌄",
            "peak": "🗻",
            "summit": "🗻",
            "ridge": "🌊",
            "range": "🌊",
            "foothills": "🌊",
            "waterfall": "🌊",
            "geyser": "🌋",
            "hot spring": "🌊",
            "oasis": "🏝️",
            "quicksand": "🏜️",
            "spring": "🌷",
        }
    </script>
</body>

</html>